  apiVersion: argoproj.io/v1alpha1
  kind: Application
  metadata:
    name: clientserver
    namespace: argocd              # where ArgoCD is installed
  spec:
    project: default
    source:
      repoURL: 'https://github.com/sweetloveinyourheart/exploding-kittens-gitops.git'
      targetRevision: main
      path: charts/kittens-service
      helm:
        valueFiles:
        - values/client-value.yml
    destination:
      server: 'https://kubernetes.default.svc'
      namespace: kittens
    syncPolicy:
      automated:
        prune: true       # delete resources no longer defined
        selfHeal: true    # reconcile drift automatically
      syncOptions:
        - CreateNamespace=true